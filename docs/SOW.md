# ChoibenAssist AI Backend - SOW (Statement of Work)

## 🎯 プロジェクト概要

### プロジェクト名
ChoibenAssist AI Backend - 学習支援AIマイクロサービス

### プロジェクト期間
2025年7月12日 〜 2025年7月18日 (7日間)

### プロジェクト目標
学習記録アプリのAI機能を提供するマイクロサービスを構築し、個人化された学習プラン生成、TODO提案、進捗分析機能を実装する。

## 📋 作業範囲 (Scope of Work)

### Phase 1: 基盤構築 (Day 1)
**成果物:**
- [x] FastAPIプロジェクト初期化
- [x] 基本的なプロジェクト構造構築
- [x] 設定管理システム (config.py)
- [x] 認証・セキュリティ基盤 (dependencies.py)
- [x] 基本的なルーター構造
- [ ] Gemini API連携テスト
- [ ] 環境変数設定完了

**技術要件:**
- Python 3.10+
- FastAPI 0.104.1
- Pydantic 2.5.0
- Google Generative AI 0.3.2

### Phase 2: 外部連携 (Day 2)
**成果物:**
- [ ] Supabase REST API連携実装
- [ ] 学習データ取得機能
- [ ] ユーザー情報取得機能
- [ ] データ分析パターン機能
- [ ] エラーハンドリング実装

**技術要件:**
- HTTPX 0.25.2
- Requests 2.31.0
- 非同期処理対応

### Phase 3: AI機能実装 - 学習プラン生成 (Day 3)
**成果物:**
- [ ] 学習プラン生成API (`POST /api/ai/plan`)
- [ ] Geminiとの連携処理
- [ ] 個人化アルゴリズム
- [ ] レスポンス構造化
- [ ] ユニットテスト

**技術仕様:**
- 入力: ユーザーID、科目、目標日、難易度、学習時間
- 出力: 構造化された学習プラン (JSON)
- 応答時間: ≤ 5秒

### Phase 4: TODO提案機能 (Day 4)
**成果物:**
- [ ] 今日のTODO提案API (`POST /api/ai/todo`)
- [ ] 優先度付けアルゴリズム
- [ ] 時間見積もり機能
- [ ] 統合テスト

**技術仕様:**
- 入力: ユーザーID、利用可能時間、学習設定
- 出力: 優先度付きTODOリスト
- 学習履歴分析による個人化

### Phase 5: 分析・アドバイス機能 (Day 5)
**成果物:**
- [ ] 学習進捗分析API (`POST /api/ai/analysis`)
- [ ] 学習アドバイスAPI (`POST /api/ai/advice`)
- [ ] 強み・弱み分析
- [ ] 改善提案アルゴリズム
- [ ] パフォーマンス最適化

**技術仕様:**
- 期間別分析 (日次、週次、月次)
- 科目別詳細分析
- アクションアイテム生成

### Phase 6: 目標設定支援 (Day 6)
**成果物:**
- [ ] 学習目標設定支援API (`POST /api/ai/goals`)
- [ ] SMART目標生成
- [ ] 達成度予測機能
- [ ] 統合テスト
- [ ] パフォーマンステスト

**技術仕様:**
- SMART原則に基づく目標生成
- 現在レベルからの適切な目標設定
- 測定可能な成功指標

### Phase 7: 最終調整・デプロイ準備 (Day 7)
**成果物:**
- [ ] エラーハンドリング強化
- [ ] ログ機能実装
- [ ] セキュリティ監査
- [ ] API ドキュメント整備
- [ ] デプロイ設定 (Railway/GCP)
- [ ] CI/CD パイプライン設定

## 🛠 技術スタック

### バックエンド
- **フレームワーク**: FastAPI 0.104.1
- **言語**: Python 3.10+
- **AI/LLM**: Google Gemini 2.0 Flash-Lite
- **HTTP クライアント**: HTTPX, Requests
- **バリデーション**: Pydantic 2.5.0

### インフラ・デプロイ
- **デプロイ**: Railway または Google Cloud Run
- **CI/CD**: GitHub Actions
- **監視**: ヘルスチェックエンドポイント

### 開発ツール
- **テスト**: Pytest, pytest-asyncio
- **コード品質**: Black, Flake8, MyPy
- **環境管理**: python-dotenv
- **ドキュメント**: Swagger UI, ReDoc

## 📊 成功指標 (KPI)

### パフォーマンス
- [ ] AI API応答時間 ≤ 5秒
- [ ] エラー率 ≤ 1%
- [ ] 可用性 ≥ 99%

### 品質
- [ ] テストカバレッジ ≥ 80%
- [ ] コード品質スコア ≥ A
- [ ] セキュリティスキャン クリア

### 機能
- [ ] 全5つのAIエンドポイント実装完了
- [ ] Supabase連携動作確認
- [ ] フロントエンド連携テスト完了

## 🚀 デリバリー計画

### マイルストーン
1. **Day 1-2**: 基盤完成 + 外部連携
2. **Day 3-4**: コアAI機能 (プラン生成 + TODO提案)
3. **Day 5-6**: 高度AI機能 (分析 + 目標設定)
4. **Day 7**: 本番準備完了

### 最終成果物
- 動作するFastAPI アプリケーション
- 5つのAI機能エンドポイント
- 完全なAPI ドキュメント
- デプロイ可能な状態のコード
- テストスイート
- README & 運用ドキュメント

## 📝 前提条件・制約

### 前提条件
- Google Gemini API キー取得済み
- Supabase プロジェクト設定済み
- Next.js フロントエンド連携準備

### 制約
- Gemini 2.0 Flash-Lite 無料枠使用
- API レート制限: 100req/min
- 開発期間: 7日間固定

## 📞 責任・連絡体制

### 開発責任者
- バックエンド開発: AI機能実装担当
- インフラ: デプロイ・CI/CD担当

### 品質保証
- コードレビュー実施
- 自動テスト実行
- セキュリティチェック
